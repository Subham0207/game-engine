1.[DONE] Incorporate JOLT physics engine.
----------
1. Capsule collider update radius and half height to match the character. We need to delete the model geometry from CPU and GPU.
Create a destructor in Model class. Generate new capsule collider model.
-----------
1. [DONE][FOR NOW] Blending Animation -- to have smooth transition b/w two animation.
---Details---
Blendspaces and statemachines.
Have some primitive implementation of a blendspace.
[DONE] fully working blendspaces.
[DONE]Camera behind the character
[DONE] Correct animation to play when turning and moving around. All movement input including diagonal are correctly applying on the physics capsule. Blendspace still broken.
[DONE] Handle playing animation and blendspace separately in Animator class.
[DONE] Next is state machine. Locomotion done, jump state done, dodgeroll state pending.
[DONE] I only have 1 animation of dodge roll:
    1. dodge roll only to mouse direction.
    2. when dodge roll, cancel any directionVector values, and add only towards mouse direction.
[DONE] When jumping, in addition to playing the jump animtion, also make the capsule jump to be able to reach heights, otherwise right now the capsule just collides.
[DONE] jump animation finish is what disables the isjumping bool. So now if the jump animation duration > jump duration then more jumps occur. We need to handle: jump start, isFalling, separately.
not setting startedJump when character is not grounded helped here in input.cs file.
[DONE] Smooth transition b/w poses of two different animation/blendspace.
1. Transition b/w a pose and an animation is working.
2. [DONE]Transition b/w pose and blendspace is not working.
There was a bug related to the execution order of poseTranisition, setting blendselection and m_currentanimation.
3. smooth transition on 2nd time dodgeRoll animation causes jerk and the animation is not played.


[PENDING]Create new Project
when .exe is compiled, the directory links are relative it.[DONE]
Think enginesource code and engine exe.

1. [DONE]Create manifest.json file -- names the project, engine version, and mount points (directories).
2. Project that got created: set it as current project.
3. create a Init UI where we can select a project to open otherwise create a new. No default editor can open otherwise.
4. [DONE] we can save model, Add option in Model class to save physics body if attached. I think for now only type of the body
as string in the model or meta file is sufficient (we don't support this right now so save it in the model binary as string const).
3. [PENDING] Implmement saving/logic to character class as well. this will inturn require the class required in Character to also have saving/loading logic.
Then we move the creationg of blendspace, statmachine, etc to createNewProject. And then in editor add functionality to create these, i.e blendspace etc. , so we can apply them on on character.
[FIXED] saving characer and its attached model only for now. Model filename is bugged leading to overriding the floorBox model file.
This needs a fix. And nothing loads up in the editor for now ( floorBox would have loaded if its modelfile was not overridden ).
Fixed by using guid for meta files And using contentName for file binaries.
[PENDING] Load character and model only for now. 
Only create physics body on model if present. 
No animation logic should be there if there is no animation.
Textures are not loading, due to getting saved in engine assets directory. Should be saved and ref from project directory instead.
I have fixed the directory to  project now for txture files. But the the Materials are loading as NULL. So something wrong with boost serialization of them.
    [DONE]able to load capsule settings and init a new.
    [PENDING]save and load skeleton
    [PENDING]save and load animStatemachine
        [PENDING] cannot serialize a lambda. Will Try Lua scripting with sol2 cpp binding to solve this.
            [DONE] Integrate Lua and sol2
            [PENDING] try it out. Maybe with a test.
            [PENIDNG] create statemachine in createnewproject instead of character constructor. Because we want to save animations to projet dir.
                1. save `.animations` in project directory. corresponding `.meta` files get created.
                2. `.meta` files get scanned and guidToFilePath map is populated.
                3. when loading blendpoint -> load these animations in memory using thier guid. And thus the blendspace will be loaded.
                4. same will happen with state. Either it will load blendspace or an animation using corresponding guids. And thus a statemachine should get loaded.
                5. load statemachine when character is loaded. Observations: The capsule collider is not initialized for the second character.
                [ISSUES]
                    [FIXED]animation not saving
                    [FIXED] `skeleton->skeletaltreeRoot` is coming up null. Called skeletal->buildBoneHerarchy() and initilzing boneshaders to fix.
                    [FIXED] animation didnot load leading to animation being null So animation->GetDuration() call fails. stategraph initialization was wrong in statemachine. Now animations seem to be there.
                    [FIXED] animation not playing on movement inputs.
                    It was due to model shaders being initilized on character so no bone info that got calculated could go through to character's shader.
                    [DONE] Destroy character object after saving creating new project. Because otherwise objects linger in memory and interfere with the loaded project. Like wrong playerController being used to control player since always 0th index one is used.
                    [DONE] Lua script doesnot work.
                    [DONE] Loading multiple character breaks. Now things load. But you cannot select which playerController is active/Possessed.[FIXED] Camera and playerController are managed separately. Telling which playerController to possess doesnot select the correct camera. So I a selecting playerControllerSelectedId + 1 ( since 0th index camera is of editor ).
                    [FIXED] Capsule collider of second character is not there why ?
                        the collider is getting snapped to first character.
                        The location for normal and texture coords are coming empty in the second loaded character collider.
                        I see vertices do have normal and texture but they are still missing in shader.
                        I see in render doc wrong shader is active while drawing this capsule collider.
                        I re-bound shader id for capsule collider on draw. Its a patch but not sure how the issue is originally coming from.
                    [FIXED]
                    Hitting play second time crashes. This is due to deleting physics when play is crashing. Fixed by correctly deleting physics.
                    [DONE]
                    Also the character is not back to T posing when play stops.
                    [PENDING] when moving the mouse in the top middle of the screen, the character turns back and is not facing mouse direction.
    [PENDING]save and load blendspace
    [PENDING] Bug while getting material in model import UI. But Rendering looks fine.

[FOR LATER][PENDING]Some script that can populate engineAssets directory as the files are too large for github.

[PENDING] Saving project files
1. try saving a level.
2. then lets try saving a project -- which should be a collection of saving levels.
3. then a handy exe file, in that project, that can run the editor and open the starting level, create an empty level if none is found.
4. save the floorBox from createNewProject and try loading that project.
What things to save:
1. Character, model
1. skeleton
2. capsuleCollider -- inheritance going on. capsule collider - physicsObject
2. playerController
3. blendspace
3. Animation
4. statemachine
5. input
6. level

For BlendSpace 2D to fully correctly work
1. Time warp
2. Registration Curves

BLending is not perfect I am  anyways trying adding inputs:
1. issue: BlendFactor is not being considered. we just have input of the blendPoint.
Now every animation selected will be blended by the blendFactor which represents the closeness
of the blend point to the animations. Animatoins with lower blend factor will have more influence.
I see I m passing the blendPoint locatoin as the blendFactor ( which is wrong).

We are getting wrong blendfactor when we are at intermediate position in blendspace.

Tried fixing it with blendfactor for each of the selected animatoins to blend. Buts its not  perfect still.
1,1 should be walk but model disappears but walk works until 0.999..., 0.999...

[DONEHERE] Alright got the correct blending logic in place.

[DONE] Fix the poping when 1 animation completely takes over. Probably fixed using registration curves and other techiniques.
Didnot use registration curves corrected the blending logic and application of blendfactor specifically rotational solved this issue.

---Details---

1. [DONE] Active PlayerController. PlayerController class (Character uses the playerController to recieve cmds).  To know which character to apply actions (Like animation) when given the cmd.
---Details---
I have clientHandler. We can just keep it for global in engine handling of camera and client's Input.

create activePlayerController pointer. If its not set use the clientHandler.

PlayerController: will have just a InputHandler and will give control cmds to attached StateMachine on the character.
StateMachine can be a simple enum based one.

[Bug] [DONE] For now we need to select a model to load an animation because we parse the model's bones to read the animation data from the animation file. We can later make the boneData completely standalone in the animation file.
Since when applying the animation we just lookup the animation.
Actually I was easily able to separate them.

We need a Play state in the game. When play is hit we switch the 1st player controller or active player controller as being controlled.

---Details---

1. [DONE] pressing key to change animation. Maybe start with walk cycle using WASD.

11. [PENDING] Draw bone vertex influence; improve debugging this.
increment, decrement,  highlight the bone and show its name. Tried to implment this still the data is not clear. 

12. [PENDING] I could improve how the bones look (something like blender) and
Also have them controlled ( we control its local transform ).

13. [PENDING] Select vertex and read its data -> like which bone influences is and so  on.

14. [PENDING] make stopping the animation work.

8. [DONE] vertex position is updated on GPU but not CPU so model selection is broken ( since it happens on CPU)

9. [DONE] Animator.hpp -> CalculateBoneTransform is the best place to draw bone

10. [DONE] First get the bones to render even when character is T-posing/Default-pose ( No animatoin is loaded).
Sort of worked. Still missing some bones.
Now animation is broken. Lets first fix the animation first.

Done more detail below
--- Detail ----

eye is not animated because no bone is influencing it.
---
Bone influence is local to model, they are used to animate the vertices they influence.
After fixing issue 10. This is working.
---

[PROBLEM] Lets assume boneInfoMap is correct when we have attached an animation
So now why would bones get wrong transformation ?
If an animation is attached, check if the bone exists in the animation, get its transform.
If the bone does not exists use the node's default transformation gotten from Skeleton.
But I think the array index to which we apply the a transformation is wrong.

LeftShoulder bones were for example were not rendered.
It is because in bind pose bones that only influence rotation will inherit their parent's location.
So these bones and thier parent's position were same.

But during animation these bones recieve location as well so get drawn. Animation also stores location data of these bones.

its still not accurate. What we are missing:
1. How to tell if a parent-child relation is using keepOffset or not: Compare the parent-child direction vector with orientation of the parent bone. And if its pointing towards child the relationship is not using keep offset.
2. Lets store the sphere models rendering logic in  main.cpp so we can active correct shader.
3. Loading static meshes is broken fix that first

4. [PROGRESS>>>] I actually found what is causing animation to render wrong. The Node graph of bones has nodes that are not bones and that is why the animation explodes.

5. I found this document: https://github.com/assimp/assimp/issues/4035. There are extra helper node in the aiScene followed by the actual node.
These need to be combined in the order they occur to get the local transformation of the bone.

6. Now its working....

--- Detail ----
